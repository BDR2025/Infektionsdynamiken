/* ---------- Page-specific: model pages ---------- */
.model-hero{ display:grid; gap: 16px; grid-template-columns: 1fr 1fr; align-items: stretch; }
@media (max-width: 960px){ .model-hero{ grid-template-columns: 1fr; } }

.model-intro{ display:grid; gap: 12px; }
.model-intro h2{ margin: 0; font-size: clamp(20px, 3vw, 28px); }
.model-intro .desc{ color: var(--muted); }

.controls{ display:grid; gap: 12px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
.explain{ display:grid; gap: 12px; }

.pager-hint{ color: var(--muted); font-size: 12px; }

/* SIR-Canvas responsive */
#sirCanvas {
  width: 100%;
  max-width: 1000px;   /* optionaler Deckel, damit es nicht zu breit wird */
  height: auto;
  display: block;
  margin: 0 auto;
}

/* =========================================
   SIR – Toolbar, Live‑KPI, Canvas
   ========================================= */
.model-toolbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; margin-bottom:12px; flex-wrap:wrap;
}
.preset-bar{ display:flex; gap:8px; }
.btn-pill{ border-radius:999px; padding:8px 12px; }

.live-kpi{
  display:flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  background:#f3f4f6; color:#374151; /* dezentes Grau */
  border:1px solid #e5e7eb;
  font-size:.95rem;
}

/* SIR-Canvas (Diagramm) – Responsive Layout
   - Breite flexibel, max. 1000px
   - Höhe automatisch; JS setzt die interne Pixelauflösung (fitCanvas) */
#sirCanvas{
  width:100%;
  max-width:1000px;
  height:auto;
  display:block;
  margin:0 auto;
}
/* =========================================
   SIR – Intro-Toolbar, Canvas, Interaktiv-Layout
   ========================================= */
.model-toolbar{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; margin-bottom:12px; flex-wrap:wrap;
}
.preset-bar{ display:flex; gap:8px; }
.btn-pill{ border-radius:999px; padding:8px 12px; }

/* Intro: großes Chart (ohne Achsen) */
#sirCanvas{
  width:100%;
  max-width:1000px;
  height:auto;
  display:block;
  margin:0 auto;
}

/* Interaktives Grid */
.interactive-grid{
  display:grid;
  grid-template-columns: 2fr 1fr;
  gap:14px;
}
.interactive-chart canvas{
  width:100%;
  height:auto;
  display:block;
}
.interactive-side{
  display:grid;
  gap:12px;
}
.kpi-grid{
  display:grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap:10px;
}
.kpi-card{
  padding:10px 12px;
  border:1px solid var(--border, #e5e7eb);
  border-radius:10px;
  background:#fff;
}
.kpi-title{ font-size:.85rem; color:#6b7280; }
.kpi-value{ font-size:1.25rem; font-weight:600; }

.controls{ display:grid; gap:10px; }
.ctrl{ display:grid; gap:6px; }
.ctrl input[type="range"]{ width:100%; }

/* Mobile: interaktive Ansicht stapeln */
@media (max-width: 900px){
  .interactive-grid{ grid-template-columns: 1fr; }
  .kpi-grid{ grid-template-columns: 1fr 1fr; }
}

/* KPI-Farbflächen (dezent) */
.kpi--green { background: rgba(0,158,115,.06); border-color: rgba(0,158,115,.25); }
.kpi--blue  { background: rgba(0,114,178,.06); border-color: rgba(0,114,178,.25); }
.kpi--neutral { background:#fff; }

/* kurze Erläuterung unter dem Faktor */
.kpi-hint { font-size: .8rem; color:#6b7280; margin-top:2px; }

/* Safety: Notice nie „Wort für Wort“ umbrechen */
.notice { white-space: normal; word-break: normal; }
.notice p { margin: 0; }

.chart-panel canvas,
.chart-box canvas,
canvas.responsive {
  display: block;
  width: 100%;
  height: auto; /* die echte Höhe setzt fitCanvas */
}

/* --- Side panel: KPI & Coach/Controls ----------------------------------- */
.kpi-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 12px; }
.kpi-card { border-radius: 12px; padding: 12px; border: 1px solid var(--border); background: #fff; }
.kpi-title { font-size: 12px; color: var(--muted); }
.kpi-value { font-size: 24px; font-weight: 700; line-height: 1.2; }
.kpi-hint  { font-size: 12px; color: var(--muted); }

.kpi--green { background: rgba(0,158,115,.06); border-color: rgba(0,158,115,.2); }
.kpi--blue  { background: rgba(0,114,178,.06); border-color: rgba(0,114,178,.2); }
.kpi--neutral { background: #fff; }

#sideBody { display: grid; gap: 12px; }

/* Coach – quadratisch */
.coach-box { display: grid; gap: 8px; }
.coach-aspect { position: relative; width: 100%; aspect-ratio: 1/1; border-radius: 14px;
  background: #000; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,.15), 0 0 0 1px rgba(0,0,0,.06); }
.coach-video { width: 100%; height: 100%; object-fit: cover; display: block; }
.coach-play { position: absolute; inset: 0; display: grid; place-items: center;
  background: radial-gradient( circle at 50% 50%, rgba(0,0,0,.45), rgba(0,0,0,.65) );
  color: #fff; font-size: 28px; border: 0; cursor: pointer; }
.coach-play.is-hidden { display: none; }
.coach-sync { font-size: 12px; color: var(--muted-strong); display: inline-flex; align-items: center; gap: 6px; }

/* Controls */
.controls .ctrl { display: grid; gap: 6px; }
.controls input[type="range"] { width: 100%; }

/* kleine Screens */
@media (max-width: 900px){
  .kpi-grid { grid-template-columns: 1fr; }
}

/* KPI */
.kpi-grid { display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; margin-bottom:12px; }
.kpi-card { border-radius:12px; padding:12px; border:1px solid var(--border); background:#fff; }
.kpi-title{ font-size:12px; color:var(--muted); }
.kpi-value{ font-size:24px; font-weight:700; line-height:1.2; }
.kpi-hint { font-size:12px; color:var(--muted); }
.kpi--green{ background:rgba(0,158,115,.06); border-color:rgba(0,158,115,.2); }
.kpi--blue { background:rgba(0,114,178,.06); border-color:rgba(0,114,178,.2); }

/* Coach (quadratisch, weißer Hintergrund) */
.coach-box{ display:grid; gap:8px; }
.coach-aspect{ position:relative; width:100%; aspect-ratio:1/1; border-radius:14px;
  background:#fff; overflow:hidden; box-shadow:0 10px 30px rgba(0,0,0,.12), 0 0 0 1px rgba(0,0,0,.06); }
.coach-video{ width:100%; height:100%; object-fit:cover; background:#fff; display:block; }

/* Controls */
.controls .ctrl{ display:grid; gap:6px; }
.controls input[type="range"]{ width:100%; }

@media (max-width:900px){
  .kpi-grid{ grid-template-columns:1fr; }
}

/* --- Intro/Interactive phases ------------------------------------------- */
[data-phase="intro"] #kpiGrid,
[data-phase="intro"] #controls { display: none !important; }
[data-phase="interactive"] #coachBlock { display: none !important; }

/* --- Grid stays identical for both phases ------------------------------- */
.interactive-grid {
  display: grid;
  grid-template-columns: 1fr 360px;   /* fixed side width → stable canvas size */
  gap: 16px;
  align-items: start;
}
.interactive-chart { min-height: 440px; } /* ensures non-zero size for DPR sizing */

/* Coach Dock */
.coach-dock {
  display: grid; gap: 8px; align-content: start;
  margin-top: 10px;
}
.coach-video {
  width: min(360px, 100%);
  border-radius: 14px;
  box-shadow: 0 12px 30px rgba(2, 6, 23, .18);
  border: 1px solid #e5e7eb;
  background: #000;
}
.coach-controls {
  display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
}
.coach-sync { color:#64748b; font-size: .95rem; display:flex; gap:8px; align-items:center; }

@media (max-width: 900px){
  .coach-video { width: 100%; }
}

/* --- Coach video card ---------------------------------------------------- */
.coach-card {
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
  padding: 12px;
}
.coach-video {
  width: 100%;
  aspect-ratio: 1 / 1;      /* square */
  object-fit: cover;
  background: #fff;         /* avoid black flash before first frame */
  border-radius: 12px;
  display: block;
}
/* no controls overlay anywhere */
.coach-video::-webkit-media-controls { display: none !important; }
.coach-video::-webkit-media-controls-enclosure { display: none !important; }

/* Canvas sizing (DPR will set the bitmap size) */
#sirCanvas { width:100%; height:auto; display:block; }

/* Optional: hide the small sync row for now */
.sync-row { display:none; }

@keyframes tryPulse {
  0%   { box-shadow: 0 0 0 0 rgba(239,68,68,0.8); }
  50%  { box-shadow: 0 0 0 12px rgba(239,68,68,0); }
  100% { box-shadow: 0 0 0 0 rgba(239,68,68,0); }
}

.pulse-try {
  animation: tryPulse 1s ease-in-out infinite;
  background-color: #ef4444 !important; /* rot */
  border-color: #dc2626 !important;
  color: #fff !important;
}

